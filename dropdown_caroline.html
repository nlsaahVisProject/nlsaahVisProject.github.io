<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/sunburst_bilevel.css">
    <script type="text/javascript" src="js/wave_questions.js"></script>
    <script type="text/javascript" src="js/jquery-3.2.1.min.js"></script>
    <script type="text/javascript">
        var wave="wave_1";
        var wavequestions_data = eval(wave_questions); 
        var theKeys = [];
    	var genreateSelector = function(containDiv, index) {
    		var dropdown_group = document.getElementById(containDiv);

    		var selectList_sectionlevel = document.createElement("select");
    		selectList_sectionlevel.id = "section_dropdown" + index;
    		dropdown_group.appendChild(selectList_sectionlevel);

    		for (var sectionkey in wavequestions_data[wave]) {
				    var option = document.createElement("option");
				    option.value = sectionkey;
				    option.text = sectionkey;
				    selectList_sectionlevel.appendChild(option);				 
			}
	    		
    		$("#section_dropdown" + index).change(function () {        	
        		//Create and append select list
        		//var array = ["Volvo","Saab","Mercades","Audi"];
        		var section = this.value;
        		if($("#" + "question_dropdown"+index).length == 0){
					var selectList_questionlevel = document.createElement("select");
					selectList_questionlevel.id = "question_dropdown"+index;
					}
				else{
					var selectList_questionlevel=document.getElementById("question_dropdown"+index);
				}
				selectList_questionlevel.setAttribute("onchange","questionvaluefunction(this)");
				dropdown_group.appendChild(selectList_questionlevel);

				//Create and append the options
				for (var questionkey in wavequestions_data[wave][section]) {
					// for (var section_key in wavequestions_data[wavekey])
				    var option = document.createElement("option");
				    option.value = questionkey;
				    option.text = wavequestions_data[wave][section][questionkey];
				    selectList_questionlevel.appendChild(option);				 
				}
	    	});
    	}
        
    	var questionvaluefunction=function(obj){
    			console.log(obj.value);
                theKeys.append(obj.value);
    		};


    	$( document ).ready(function() {
    		console.log( "ready!" );
    		
    		genreateSelector("dropdown_group", 1);
    		genreateSelector("dropdown_group", 2);
    		genreateSelector("dropdown_group", 3);
    		genreateSelector("dropdown_group", 4);
    		genreateSelector("dropdown_group", 5);
    		

    	});
    	

    </script>

</head>

<body>
<div id="dropdown_group">
</div>
</body>